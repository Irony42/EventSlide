<!DOCTYPE html>
<html>

<head>
  <title>Eventslide diaporama</title>
  <style>
    #slideshow {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    var images = [];

    function changeImage() {
      var currentImageIndex = 0;

      function nextImage() {
        var currentImage = images[currentImageIndex];
        var imageUrl = '/admin/getpic/' + currentImage.filePath;
        $('#slideshow').css('background-image', 'url("' + imageUrl + '")');

        currentImageIndex++;
        if (currentImageIndex >= images.length) {
          currentImageIndex = 0;
        }
      }

      setInterval(nextImage, 5000);
      $('#slideshow').click(nextImage);
    }

    function updateImageList() {
      $.getJSON('/admin/getpics', function (data) {
        images = data.images;
        changeImage();
      });
    }

    updateImageList();
    setInterval(updateImageList, 30000);
  </script>
</head>

<body>
  <div id="slideshow"></div>
</body>

</html>